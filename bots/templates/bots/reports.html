{% extends "admin/base.html" %}


{% block content %}
<form action="{{ form.action }}" method="post">
    <input onClick="history.back()" type="button" value="Back" />
    <input type="submit" name="toselect" value="Change selection" />
    {% include "bots/paginator.html" %}

    <table id="botstable">
        {% for hidden in form.hidden_fields %}
            {{ hidden }}
        {% endfor %}
        <thead>
            <tr>
                <th><button class="botsheader" type="submit" name="order" value="status" />State</button></th>
                <th><button class="botsheader" type="submit" name="order" value="type" />Type</button></th>
                <th><button class="botsheader" type="submit" name="order" value="lastreceived" />#in</button></th>
                <th><button class="botsheader" type="submit" name="order" value="send" />#out</button></th>
                <th><button class="botsheader" type="submit" name="order" value="ts" />Date/time</button></th>
                <th><button class="botsheader" type="submit" name="order" value="errortext" />Error</button></th>
            </tr>
        </thead>
        <tbody>
        {% for row in queryset.object_list %}
            <tr  class="{% cycle 'row1' 'row2' %}">
                <td>{% if row.status %}
                        <img src="/media/images/error.png" style="width: 1em;"/>
                    {% else %}
                        <img src="/media/images/ok.png" style="width: 1em;"/>
                    {% endif %}
                </td>
                <td>{{row.type}}</td>
                <td>{{row.lastreceived}}</td>
                <td>{{row.send}}</td>
                <td class="nowrap">{{row.ts}}</td>
                <td>
                    {% if row.lasterror %}
                        {{row.lasterror}} files with errors; 
                    {% endif %}
                    {% if row.lastok %}
                        {{row.lastok}} files got stuck; 
                    {% endif %}
                    {% if row.lastopen %}
                        {{row.lastopen}} system errors; 
                    {% endif %}
                    {% if row.processerrors %}
                        {{row.processerrors}} errors in processes; 
                    {% endif %}
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</form>
{% endblock %}
